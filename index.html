<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Flappy Bure</title>
<style>
  body {
    margin: 0;
    background: #70c5ce;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
    font-family: Arial, sans-serif;
  }
  canvas {
    background: linear-gradient(#70c5ce, #d0f4f7);
    border: 2px solid #333;
  }
</style>
</head>
<body>

<canvas id="game" width="400" height="600"></canvas>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

let bure = {
  x: 80,
  y: 300,
  r: 12,
  velocity: 0
};

const gravity = 0.5;
const jump = -8;

let pipes = [];
let frame = 0;
let score = 0;
let gameOver = false;

function reset() {
  bure.y = 300;
  bure.velocity = 0;
  pipes = [];
  score = 0;
  gameOver = false;
}

document.addEventListener("click", () => {
  if (gameOver) {
    reset();
  } else {
    bure.velocity = jump;
  }
});

function drawBure() {
  ctx.beginPath();
  ctx.arc(bure.x, bure.y, bure.r, 0, Math.PI * 2);
  ctx.fillStyle = "#ffcc00";
  ctx.fill();
}

function drawPipes() {
  pipes.forEach(p => {
    ctx.fillStyle = "#2ecc71";
    ctx.fillRect(p.x, 0, p.w, p.top);
    ctx.fillRect(p.x, p.top + p.gap, p.w, canvas.height);
  });
}

function updatePipes() {
  if (frame % 90 === 0) {
    let top = Math.random() * 250 + 50;
    pipes.push({
      x: canvas.width,
      w: 50,
      top: top,
      gap: 140
    });
  }

  pipes.forEach(p => {
    p.x -= 2;

    if (
      bure.x + bure.r > p.x &&
      bure.x - bure.r < p.x + p.w &&
      (bure.y - bure.r < p.top ||
       bure.y + bure.r > p.top + p.gap)
    ) {
      gameOver = true;
    }

    if (p.x + p.w === bure.x) {
      score++;
    }
  });

  pipes = pipes.filter(p => p.x + p.w > 0);
}

function drawScore() {
  ctx.fillStyle = "#000";
  ctx.font = "24px Arial";
  ctx.fillText("Score : " + score, 20, 40);
}

function drawGameOver() {
  ctx.fillStyle = "#000";
  ctx.font = "36px Arial";
  ctx.fillText("Game Over", 90, 300);
  ctx.font = "18px Arial";
  ctx.fillText("Clique pour recommencer", 95, 340);
}

function update() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);

  if (!gameOver) {
    bure.velocity += gravity;
    bure.y += bure.velocity;

    if (bure.y + bure.r > canvas.height || bure.y - bure.r < 0) {
      gameOver = true;
    }

    updatePipes();
    drawPipes();
    drawBure();
    drawScore();
    frame++;
  } else {
    drawPipes();
    drawBure();
    drawScore();
    drawGameOver();
  }

  requestAnimationFrame(update);
}

update();
</script>

</body>
</html>
